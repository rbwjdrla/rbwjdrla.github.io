---
layout: single
title: "06.SQLD 슈퍼타입/서브타입 관계 테이블 병합"
date: 2025-07-31
categories: [Database, Sql]
---

## 핵심 구분 포인트

슈퍼타입/서브타입 관계 테이블 병합 방법에는 **원투원 타입**, **플러스 타입**, **싱글 타입** 세 가지가 있다.

## 각 병합 방법의 적용 기준

| 병합 방법 | 적용 상황 | 특징 |
|-----------|-----------|------|
| **원투원 타입** | 개별적으로 발생하는 트랜잭션 | 슈퍼타입과 각 서브타입을 개별 테이블로 구성 |
| **플러스 타입** | 슈퍼타입과 서브타입을 항상 함께 조회하되,<br>서브타입 종류별로는 구분하여 조회 | 슈퍼타입과 서브타입을 합한 형태의 테이블 구성 |
| **싱글 타입** | 서브타입을 구별하지 않고<br>전체를 한 번에 조회하는 트랜잭션 | 모든 사건을 하나의 테이블로 통합 |

## 반정규화와 테이블 병합의 개념

### 기본 개념
- 슈퍼타입, 서브타입 관계의 테이블 병합은 **데이터베이스 반정규화 기법** 중 하나
- 반정규화는 정규화된 테이블 구조를 **성능 향상을 위해** 일부러 통합하거나 구조를 변경하는 것
- **조회 성능 향상**이 주요 목적 (화면 검색 결과가 10초 이상 걸리면 사용자 불편)

### 슈퍼타입, 서브타입 관계 이해
**개념적 구조:**
- **슈퍼타입**: 공통 속성을 가진 상위 개념
- **서브타입**: 특수 속성을 가진 하위 개념
- 프로그래밍의 상속 관계와 유사 (부모 클래스 - 자식 클래스)

**예시:**
```
사건(슈퍼타입)
├── 긴급사건(서브타입)
├── 특수사건(서브타입)
└── 일반사건(서브타입)
```

## 각 병합 방법 상세 설명

### 싱글 타입 - 하나의 테이블로 통합

**개념:**
- **모든 사건(서브타입)을 한 번에 조회**해야 하는 경우에 적합
- 분리된 테이블을 조인하면 성능 저하가 발생하므로, **하나의 테이블로 통합**하여 조인 연산을 제거

**구현 방법:**
```sql
사건 통합 테이블
- 사건번호 (PK)
- 사건분류코드 (긴급/특수/일반 구분)
- 공통속성들
- 각 서브타입별 특수속성들
```

**장점:**
- 조인 없이 빠른 조회 가능
- 모든 데이터를 한 번에 처리할 때 효율적

### 플러스 타입 - 슈퍼타입+서브타입 결합

**개념:**
- **각 서브타입 테이블에 슈퍼타입의 속성을 중복 저장**하는 방식
- 슈퍼타입과 서브타입의 데이터를 항상 함께 제공해야 할 때 사용

**구현 방법:**
```sql
긴급사건 테이블 = 사건(슈퍼타입) + 긴급사건(서브타입)
특수사건 테이블 = 사건(슈퍼타입) + 특수사건(서브타입)  
일반사건 테이블 = 사건(슈퍼타입) + 일반사건(서브타입)
```

**특징:**
- 슈퍼타입의 공통 속성이 각 서브타입 테이블에 중복 저장
- 서브타입별로는 구분하되, 각각에서 완전한 데이터 제공

### 원투원 타입 - 분리 유지

**개념:**
- **슈퍼타입과 서브타입 테이블을 분리하여 각각 운영**하는 방식
- 각 트랜잭션(업무 처리)이 개별적으로 발생할 때 적합

**구현 방법:**
```sql
사건 테이블 (슈퍼타입)
긴급사건 테이블 (서브타입)
특수사건 테이블 (서브타입)
일반사건 테이블 (서브타입)
```

**특징:**
- 슈퍼타입과 서브타입의 데이터를 별도로 관리
- 조인 연산이 필요하므로 성능 저하 가능성 존재

## 성능 관점에서의 고려사항

### 조인/유니온 연산의 성능 이슈
**성능 문제:**
- **조인, 유니온 연산은 CPU 부하가 크고, 시간 복잡도가 높음**
- m개의 사건과 n개의 사건을 조인하면 m×n 만큼 연산 필요

**시간 복잡도:**
- **빅 O의 n²(n 스퀘어)**: 데이터가 두 배가 되면 연산량은 네 배로 증가
- **빅 O의 n**: 데이터가 두 배가 되면 연산량도 두 배로 증가

**해결책:**
- 가능하면 조인/유니온 연산을 줄이는 구조가 바람직
- 시스템 성능과 운영 비용에 큰 영향을 미치므로 신중한 설계 필요

## 적용 기준 상세 분석

### 데이터 조회 패턴별 최적 방법

**전체 통합 조회가 주된 경우:**
- **싱글 타입** 선택
- 모든 서브타입을 구분 없이 조회하는 트랜잭션이 빈번할 때

**서브타입별 구분 조회가 주된 경우:**
- **플러스 타입** 선택  
- 슈퍼타입과 서브타입 정보를 함께 보되, 종류별로는 분리해서 처리할 때

**개별 관리가 주된 경우:**
- **원투원 타입** 선택
- 각 서브타입을 독립적으로 관리하는 트랜잭션이 주를 이룰 때

## 정리

**핵심 선택 기준:**
- **싱글 타입**: 전체 데이터를 한 번에 조회할 때 유리
- **플러스 타입**: 슈퍼타입과 서브타입을 함께 제공하되 종류별 구분이 필요할 때 유리  
- **원투원 타입**: 각 데이터를 개별적으로 관리할 때 유리

슈퍼타입/서브타입 병합은 **반정규화의 테이블 병합 기법** 중 하나로, 시스템의 조회 성능 향상을 위한 중요한 설계 기법이다. 상황에 따라 적절한 병합 방법을 선택하는 것이 핵심이다.
